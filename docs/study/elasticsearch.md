



| 名词   | 英文     |      |
| ------ | -------- | ---- |
| 主分片 | shards   |      |
| 副本   | replicas |      |
|        |          |      |

一个 *分片* 是一个底层的 *工作单元* ，它仅保存了全部数据中的一部分。

一个分片可以是 *主* 分片或者 *副本* 分片。

一个副本分片只是一个主分片的拷贝。副本分片作为硬件故障时保护数据不丢失的冗余备份，并为搜索和返回文档等读操作提供服务。

在索引建立的时候就已经确定了主分片数，但是副本分片数可以随时修改。

索引在默认情况下会被分配5个主分片， 但是为了演示目的，我们将分配3个主分片和一份副本（每个主分片拥有一个副本分片）



- `number_of_nodes` 和 `number_of_data_nodes` 这个命名完全是自描述的。
- `active_primary_shards` 指出你集群中的主分片数量。这是涵盖了所有索引的汇总值。
- `active_shards` 是涵盖了所有索引的_所有_分片的汇总值，即包括副本分片。
- `relocating_shards` 显示当前正在从一个节点迁往其他节点的分片的数量。通常来说应该是 0，不过在 Elasticsearch 发现集群不太均衡时，该值会上涨。比如说：添加了一个新节点，或者下线了一个节点。
- `initializing_shards` 是刚刚创建的分片的个数。比如，当你刚创建第一个索引，分片都会短暂的处于 `initializing` 状态。这通常会是一个临时事件，分片不应该长期停留在 `initializing` 状态。你还可能在节点刚重启的时候看到 `initializing` 分片：当分片从磁盘上加载后，它们会从 `initializing` 状态开始。
- `unassigned_shards` 是已经在集群状态中存在的分片，但是实际在集群里又找不着。通常未分配分片的来源是未分配的副本。比如，一个有 5 分片和 1 副本的索引，在单节点集群上，就会有 5 个未分配副本分片。如果你的集群是 `red` 状态，也会长期保有未分配分片（因为缺少主分片）。